import{h as g}from"./index-D3RixPo2.js";import{_ as E,r,s as v,A as N,b as z,g as f,c as l,o,k as u,e as t,f as q,t as p,Z as b,j as k,$ as V}from"./index-CfDpPfxu.js";const A={key:0,class:"status loading"},F={key:1,class:"status error"},J={class:"icon"},P={key:2,class:"preview-content"},D={class:"toolbar"},I={class:"lang-badge"},K={class:"actions"},U=["title"],Z={class:"icon"},G=["title"],O=["innerHTML"],Q={key:0,class:"footer"},R={class:"lines"},W={key:0,class:"size"},X={__name:"Code",props:{url:{type:String,required:!0},ext:{type:String,required:!0}},setup(w){const m=w,i=r(!1),c=r(""),s=r(""),d=r(!1),n=r(!1),h=r(null),j={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",vue:"html",py:"python",java:"java",cpp:"cpp",c:"c",cs:"csharp",go:"go",rs:"rust",rb:"ruby",php:"php",html:"html",htm:"html",css:"css",scss:"scss",less:"less",json:"json",yml:"yaml",yaml:"yaml",xml:"xml",md:"markdown",sql:"sql",sh:"bash",bash:"bash"},_=v(()=>{const e=m.ext.toLowerCase().replace(/^\./,"");return j[e]||e}),S=v(()=>{const e=_.value;return{javascript:"JS",typescript:"TS",python:"Python",java:"Java",cpp:"C++",html:"HTML",css:"CSS",scss:"SCSS"}[e]||e.toUpperCase()}),T=v(()=>{if(!s.value)return"";try{return g.getLanguage(_.value)?g.highlight(s.value.trim(),{language:_.value}).value:g.highlightAuto(s.value.trim()).value}catch(e){return console.warn("é«˜äº®å¤±è´¥:",e),L(s.value)}}),y=v(()=>s.value?s.value.split(`
`).length:0),C=v(()=>{if(!s.value)return"";const e=new Blob([s.value]).size;return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`});async function x(){i.value=!0,c.value="";try{const e=await fetch(m.url);if(!e.ok)throw new Error(`HTTP ${e.status}`);const a=await e.text();s.value=a}catch(e){c.value=`åŠ è½½å¤±è´¥: ${e.message}`,s.value=""}finally{i.value=!1}}async function B(){try{await navigator.clipboard.writeText(s.value),n.value=!0,setTimeout(()=>n.value=!1,2e3)}catch{const e=document.createElement("textarea");e.value=s.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),n.value=!0,setTimeout(()=>n.value=!1,2e3)}}function L(e){const a=document.createElement("div");return a.textContent=e,a.innerHTML}return N(()=>m.url,x,{immediate:!0}),z(()=>{h.value&&h.value.addEventListener("scroll",()=>{})}),(e,a)=>{const H=f("Close"),M=f("Top"),$=f("Bottom");return o(),l("div",{class:b(["code-preview",{loading:i.value,error:c.value}])},[i.value?(o(),l("div",A,[...a[1]||(a[1]=[t("div",{class:"spinner"},null,-1),t("span",null,"åŠ è½½ä»£ç ä¸­...",-1)])])):u("",!0),c.value?(o(),l("div",F,[t("span",J,[q(H)]),t("span",null,p(c.value),1),t("button",{onClick:x,class:"retry-btn"},"é‡è¯•")])):u("",!0),!i.value&&!c.value?(o(),l("div",P,[t("div",D,[t("span",I,p(S.value),1),t("div",K,[t("button",{onClick:B,class:b(["copy-btn",{copied:n.value}]),title:n.value?"å·²å¤åˆ¶!":"å¤åˆ¶ä»£ç "},[t("span",Z,p(n.value?"âœ“":"ðŸ“‹"),1)],10,U),y.value>15?(o(),l("button",{key:0,onClick:a[0]||(a[0]=Y=>d.value=!d.value),class:"expand-btn",title:d.value?"æ”¶èµ·":"å±•å¼€"},[d.value?(o(),k(M,{key:0})):(o(),k($,{key:1}))],8,G)):u("",!0)])]),t("div",{class:"code-container",style:V({maxHeight:d.value?"none":"400px"}),ref_key:"codeContainer",ref:h},[t("pre",null,[t("code",{innerHTML:T.value,ref:"codeEl"},null,8,O)])],4),y.value>0?(o(),l("div",Q,[t("span",R,p(y.value)+" è¡Œ",1),C.value?(o(),l("span",W,p(C.value),1)):u("",!0)])):u("",!0)])):u("",!0)],2)}}},se=E(X,[["__scopeId","data-v-571bf064"]]);export{se as default};
