import{h as g}from"./index-aOoDZliR.js";import{_ as N,e as r,b as v,D as $,f as z,k as f,c as l,o,p as u,h as t,i as q,t as p,a1 as b,n as k,a2 as V}from"./index-DmZVj8mf.js";const D={key:0,class:"status loading"},F={key:1,class:"status error"},J={class:"icon"},P={key:2,class:"preview-content"},A={class:"toolbar"},I={class:"lang-badge"},K={class:"actions"},U=["title"],G={class:"icon"},O=["title"],Q=["innerHTML"],R={key:0,class:"footer"},W={class:"lines"},X={key:0,class:"size"},Y={__name:"Code",props:{url:{type:String,required:!0},ext:{type:String,required:!0}},setup(w){const m=w,i=r(!1),c=r(""),s=r(""),d=r(!1),n=r(!1),h=r(null),S={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",vue:"html",py:"python",java:"java",cpp:"cpp",c:"c",cs:"csharp",go:"go",rs:"rust",rb:"ruby",php:"php",html:"html",htm:"html",css:"css",scss:"scss",less:"less",json:"json",yml:"yaml",yaml:"yaml",xml:"xml",md:"markdown",sql:"sql",sh:"bash",bash:"bash"},_=v(()=>{const e=m.ext.toLowerCase().replace(/^\./,"");return S[e]||e}),T=v(()=>{const e=_.value;return{javascript:"JS",typescript:"TS",python:"Python",java:"Java",cpp:"C++",html:"HTML",css:"CSS",scss:"SCSS"}[e]||e.toUpperCase()}),j=v(()=>{if(!s.value)return"";try{return g.getLanguage(_.value)?g.highlight(s.value.trim(),{language:_.value}).value:g.highlightAuto(s.value.trim()).value}catch(e){return console.warn("é«˜äº®å¤±è´¥:",e),L(s.value)}}),y=v(()=>s.value?s.value.split(`
`).length:0),C=v(()=>{if(!s.value)return"";const e=new Blob([s.value]).size;return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`});async function x(){i.value=!0,c.value="";try{const e=await fetch(m.url);if(!e.ok)throw new Error(`HTTP ${e.status}`);const a=await e.text();s.value=a}catch(e){c.value=`åŠ è½½å¤±è´¥: ${e.message}`,s.value=""}finally{i.value=!1}}async function B(){try{await navigator.clipboard.writeText(s.value),n.value=!0,setTimeout(()=>n.value=!1,2e3)}catch{const e=document.createElement("textarea");e.value=s.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),n.value=!0,setTimeout(()=>n.value=!1,2e3)}}function L(e){const a=document.createElement("div");return a.textContent=e,a.innerHTML}return $(()=>m.url,x,{immediate:!0}),z(()=>{h.value&&h.value.addEventListener("scroll",()=>{})}),(e,a)=>{const H=f("Close"),M=f("Top"),E=f("Bottom");return o(),l("div",{class:b(["code-preview",{loading:i.value,error:c.value}])},[i.value?(o(),l("div",D,[...a[1]||(a[1]=[t("div",{class:"spinner"},null,-1),t("span",null,"åŠ è½½ä»£ç ä¸­...",-1)])])):u("",!0),c.value?(o(),l("div",F,[t("span",J,[q(H)]),t("span",null,p(c.value),1),t("button",{onClick:x,class:"retry-btn"},"é‡è¯•")])):u("",!0),!i.value&&!c.value?(o(),l("div",P,[t("div",A,[t("span",I,p(T.value),1),t("div",K,[t("button",{onClick:B,class:b(["copy-btn",{copied:n.value}]),title:n.value?"å·²å¤åˆ¶!":"å¤åˆ¶ä»£ç "},[t("span",G,p(n.value?"âœ“":"ðŸ“‹"),1)],10,U),y.value>15?(o(),l("button",{key:0,onClick:a[0]||(a[0]=Z=>d.value=!d.value),class:"expand-btn",title:d.value?"æ”¶èµ·":"å±•å¼€"},[d.value?(o(),k(M,{key:0})):(o(),k(E,{key:1}))],8,O)):u("",!0)])]),t("div",{class:"code-container",style:V({maxHeight:d.value?"none":"400px"}),ref_key:"codeContainer",ref:h},[t("pre",null,[t("code",{innerHTML:j.value,ref:"codeEl"},null,8,Q)])],4),y.value>0?(o(),l("div",R,[t("span",W,p(y.value)+" è¡Œ",1),C.value?(o(),l("span",X,p(C.value),1)):u("",!0)])):u("",!0)])):u("",!0)],2)}}},se=N(Y,[["__scopeId","data-v-571bf064"]]);export{se as default};
