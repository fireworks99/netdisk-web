import{d as F,a as M,c as N,f as n,e as l,j as c,u as t,k as p,m as f,o as y,g as D,h as E,x as T,s as V,A as Y,E as h,y as U}from"./index-DFYbR7MT.js";import{u as j,f as H}from"./useFileSystem-BHA1_ldw.js";import{g as I,r as $}from"./favorite-CdI5XP4s.js";const A={style:{display:"flex","align-items":"center",gap:"8px"}},P=["src"],R={class:"table-operations"},q={class:"flex_center",style:{"margin-top":"16px"}},O=F({__name:"Favorites",setup(G){const{loadIcons:v,getIconUrl:x,pageNum:s,pageSize:r,files:u,total:d,handleCurrentChange:C,handleSizeChange:z,layoutStore:b}=j();M(()=>{v(),g()});const g=async()=>{try{const a=await I({pageNum:s.value,pageSize:r.value});u.value=a.data.data.records,d.value=a.data.data.total}catch(a){console.log(a)}},w=async a=>{Y.confirm(`确认取消收藏 ${a.name} 吗？`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await $(a.id),g(),h({type:"success",message:"取消收藏成功"})}).catch(()=>{h({type:"info",message:"未取消收藏"})})};return(a,o)=>{const i=p("el-table-column"),S=p("el-button"),B=p("el-table"),k=p("el-pagination");return y(),N("div",null,[n(B,{data:t(u),style:{width:"100%"}},{default:c(()=>[n(i,{prop:"name",label:"文件名","show-overflow-tooltip":""},{default:c(e=>[l("div",A,[l("img",{src:t(x)(e.row),alt:"icon",style:{width:"18px",height:"18px"}},null,8,P),l("span",null,T(e.row.name),1)])]),_:1}),n(i,{prop:"fileSize",label:"大小",align:"center",formatter:(e,_,m)=>t(H)(m)},null,8,["formatter"]),t(b).isMobile?E("",!0):(y(),D(i,{key:0,prop:"createTime",label:"上传时间",align:"center",formatter:(e,_,m)=>t(U)(m).format("YYYY-MM-DD HH:mm:ss")},null,8,["formatter"])),n(i,{label:"操作",align:"center",width:"188"},{default:c(({row:e})=>[l("div",R,[n(S,{size:"small",type:"danger",onClick:_=>w(e)},{default:c(()=>[...o[2]||(o[2]=[V("取消收藏",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),l("div",q,[n(k,{"current-page":t(s),"onUpdate:currentPage":o[0]||(o[0]=e=>f(s)?s.value=e:null),"page-size":t(r),"onUpdate:pageSize":o[1]||(o[1]=e=>f(r)?r.value=e:null),"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next",total:t(d),onSizeChange:t(z),onCurrentChange:t(C),size:"small"},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}}});export{O as default};
