import{d as k,a as B,c as N,f as s,e as r,j as d,u as e,k as p,m as _,o as f,g as D,h as M,x as R,y as Y}from"./index-DFYbR7MT.js";import{s as U,u as V,f as j}from"./useFileSystem-BHA1_ldw.js";function H(u){return U({url:"/recent/page",params:u})}const I={style:{display:"flex","align-items":"center",gap:"8px"}},E=["src"],F={class:"flex_center",style:{"margin-top":"16px"}},q=k({__name:"Recent",setup(u){const{loadIcons:h,getIconUrl:y,pageNum:n,pageSize:o,files:m,total:g,handleCurrentChange:v,handleSizeChange:C,layoutStore:z}=V();B(()=>{h(),x()});const x=async()=>{try{const a=await H({pageNum:n.value,pageSize:o.value});m.value=a.data.data.records,g.value=a.data.data.total}catch(a){console.log(a)}};return(a,l)=>{const i=p("el-table-column"),S=p("el-table"),b=p("el-pagination");return f(),N("div",null,[s(S,{data:e(m),style:{width:"100%"}},{default:d(()=>[s(i,{prop:"name",label:"文件名","show-overflow-tooltip":""},{default:d(t=>[r("div",I,[r("img",{src:e(y)(t.row),alt:"icon",style:{width:"18px",height:"18px"}},null,8,E),r("span",null,R(t.row.name),1)])]),_:1}),s(i,{prop:"fileSize",label:"大小",align:"center",formatter:(t,w,c)=>e(j)(c)},null,8,["formatter"]),e(z).isMobile?M("",!0):(f(),D(i,{key:0,prop:"createTime",label:"上传时间",align:"center",formatter:(t,w,c)=>e(Y)(c).format("YYYY-MM-DD HH:mm:ss")},null,8,["formatter"]))]),_:1},8,["data"]),r("div",F,[s(b,{"current-page":e(n),"onUpdate:currentPage":l[0]||(l[0]=t=>_(n)?n.value=t:null),"page-size":e(o),"onUpdate:pageSize":l[1]||(l[1]=t=>_(o)?o.value=t:null),"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next",total:e(g),onSizeChange:e(C),onCurrentChange:e(v),size:"small"},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}}});export{q as default};
