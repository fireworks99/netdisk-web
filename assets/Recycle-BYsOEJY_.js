import{u as D,f as E,r as F,h as V}from"./useFileSystem-C7trFcMb.js";import{d as Y,a as j,c as U,e as n,b as l,h as s,u as a,k as i,j as f,o as y,f as $,g as H,s as I,q as h,E as g,A as R,x as q}from"./index-CtTvRn_z.js";const A={style:{display:"flex","align-items":"center",gap:"8px"}},P=["src"],G={class:"table-operations"},J={class:"flex_center",style:{"margin-top":"16px"}},Q=Y({__name:"Recycle",setup(K){const{loadIcons:C,getIconUrl:x,deleted:b,pageNum:c,pageSize:p,files:v,total:z,loadTableData:u,handleCurrentChange:k,handleSizeChange:w,layoutStore:S}=D();j(()=>{b.value=!0,C(),u()});const B=async o=>{try{await F(o.id),g({type:"success",message:"恢复成功"}),u()}catch(t){console.log(t)}},M=async o=>{R.confirm(`确认彻底删除 ${o.name} 吗？`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await V(o.id),u(),g({type:"success",message:"删除成功"})}).catch(()=>{g({type:"info",message:"未删除"})})};return(o,t)=>{const r=i("el-table-column"),_=i("el-button"),N=i("el-table"),T=i("el-pagination");return y(),U("div",null,[n(N,{data:a(v),style:{width:"100%"}},{default:s(()=>[n(r,{prop:"name",label:"文件名","show-overflow-tooltip":""},{default:s(e=>[l("div",A,[l("img",{src:a(x)(e.row),alt:"icon",style:{width:"18px",height:"18px"}},null,8,P),l("span",null,I(e.row.name),1)])]),_:1}),n(r,{prop:"fileSize",label:"大小",align:"center",formatter:(e,m,d)=>a(E)(d)},null,8,["formatter"]),a(S).isMobile?H("",!0):(y(),$(r,{key:0,prop:"createTime",label:"上传时间",align:"center",formatter:(e,m,d)=>a(q)(d).format("YYYY-MM-DD HH:mm:ss")},null,8,["formatter"])),n(r,{label:"操作",align:"center",width:"188"},{default:s(({row:e})=>[l("div",G,[n(_,{size:"small",onClick:m=>B(e)},{default:s(()=>[...t[2]||(t[2]=[h("恢复",-1)])]),_:1},8,["onClick"]),n(_,{size:"small",type:"danger",onClick:m=>M(e)},{default:s(()=>[...t[3]||(t[3]=[h("彻底删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),l("div",J,[n(T,{"current-page":a(c),"onUpdate:currentPage":t[0]||(t[0]=e=>f(c)?c.value=e:null),"page-size":a(p),"onUpdate:pageSize":t[1]||(t[1]=e=>f(p)?p.value=e:null),"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:a(z),onSizeChange:a(w),onCurrentChange:a(k)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}}});export{Q as default};
