import{e as O,u as P,b as f,g as A,h as x,i,j as d,d as t,o as y,l as n,x as C,k as l,t as M,n as p,y as k,s as E,E as g,D as B}from"./index-CsUDUn4G.js";import{_ as j,r as F,i as N,j as S,f as Y}from"./dynamic-import-helper-Cm1A7m1i.js";const $={style:{display:"flex","align-items":"center",gap:"8px"}},z=["src"],H={class:"table-operations"},J=O({__name:"Recycle",setup(U){const b=P(),c=f({}),D=["folder","file","pdf","docx","xlsx","pptx","image","audio","video","md"],T=async()=>{for(const e of D){const s=await j(Object.assign({"../../assets/images/icons/audio.svg":()=>t(()=>import("./audio-BgyP0fEQ.js"),[]),"../../assets/images/icons/docx.svg":()=>t(()=>import("./docx-Dc9exPZ4.js"),[]),"../../assets/images/icons/file.svg":()=>t(()=>import("./file-8efNKRjW.js"),[]),"../../assets/images/icons/folder.svg":()=>t(()=>import("./folder-DSJNdW5D.js"),[]),"../../assets/images/icons/image.svg":()=>t(()=>import("./image-DLn9MuYV.js"),[]),"../../assets/images/icons/md.svg":()=>t(()=>import("./md-Wca2XR1R.js"),[]),"../../assets/images/icons/pdf.svg":()=>t(()=>import("./pdf-Cl5NwO0Y.js"),[]),"../../assets/images/icons/pptx.svg":()=>t(()=>import("./pptx-BXalMJSa.js"),[]),"../../assets/images/icons/video.svg":()=>t(()=>import("./video-kaPZXCcl.js"),[]),"../../assets/images/icons/xlsx.svg":()=>t(()=>import("./xlsx-DkLPkXK6.js"),[])}),`../../assets/images/icons/${e}.svg`,6);c.value[e]=s.default}},I=e=>{const s=L(e);return c.value[s]||c.value.file},L=e=>{if(e.type==="FOLDER")return"folder";const s=V(e.name);return{pdf:"pdf",doc:"docx",docx:"docx",xls:"xlsx",xlsx:"xlsx",ppt:"pptx",pptx:"pptx",jpg:"image",jpeg:"image",png:"image",svg:"image",md:"md",mp3:"audio",mp4:"video",webm:"video",mov:"video",ogv:"video"}[s.toLowerCase()]||"file"},V=e=>{const s=e.split(".");return s.length>1?s.pop():""},u=f([]),r=async()=>{try{const e=await F();u.value=e.data.data}catch(e){console.log(e)}};A(()=>{T(),r()});const h=async e=>{try{await N(e.id),g({type:"success",message:"恢复成功"}),r()}catch(s){console.log(s)}},R=async e=>{B.confirm(`确认彻底删除 ${e.name} 吗？`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await S(e.id),r(),g({type:"success",message:"删除成功"})}).catch(()=>{g({type:"info",message:"未删除"})})};return(e,s)=>{const a=d("el-table-column"),v=d("el-button"),w=d("el-table");return y(),x(w,{data:u.value,style:{width:"100%"}},{default:i(()=>[n(a,{prop:"name",label:"文件名","show-overflow-tooltip":""},{default:i(o=>[l("div",$,[l("img",{src:I(o.row),alt:"icon",style:{width:"18px",height:"18px"}},null,8,z),l("span",null,M(o.row.name),1)])]),_:1}),n(a,{prop:"fileSize",label:"大小",align:"center",formatter:(o,_,m)=>p(Y)(m)},null,8,["formatter"]),p(b).isMobile?C("",!0):(y(),x(a,{key:0,prop:"createTime",label:"上传时间",align:"center",formatter:(o,_,m)=>p(k)(m).format("YYYY-MM-DD HH:mm:ss")},null,8,["formatter"])),n(a,{label:"操作",align:"center",width:"188"},{default:i(({row:o})=>[l("div",H,[n(v,{size:"small",onClick:_=>h(o)},{default:i(()=>[...s[0]||(s[0]=[E("恢复",-1)])]),_:1},8,["onClick"]),n(v,{size:"small",type:"danger",onClick:_=>R(o)},{default:i(()=>[...s[1]||(s[1]=[E("彻底删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])}}});export{J as default};
