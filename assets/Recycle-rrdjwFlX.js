import{e as O,u as P,b as v,g as A,h as f,i,j as d,d as s,o as x,l as n,x as C,k as l,t as M,n as p,y as k,s as y,D as B,E}from"./index-pQcMDxex.js";import{_ as j,r as F,i as N,j as S,f as Y}from"./dynamic-import-helper-DcMbFYXj.js";const $={style:{display:"flex","align-items":"center",gap:"8px"}},z=["src"],H={class:"table-operations"},J=O({__name:"Recycle",setup(U){const b=P(),r=v({}),D=["folder","file","pdf","docx","xlsx","pptx","image","audio","video","md"],T=async()=>{for(const e of D){const t=await j(Object.assign({"../../assets/images/icons/audio.svg":()=>s(()=>import("./audio-BgyP0fEQ.js"),[]),"../../assets/images/icons/docx.svg":()=>s(()=>import("./docx-Dc9exPZ4.js"),[]),"../../assets/images/icons/file.svg":()=>s(()=>import("./file-8efNKRjW.js"),[]),"../../assets/images/icons/folder.svg":()=>s(()=>import("./folder-DSJNdW5D.js"),[]),"../../assets/images/icons/image.svg":()=>s(()=>import("./image-DLn9MuYV.js"),[]),"../../assets/images/icons/md.svg":()=>s(()=>import("./md-Wca2XR1R.js"),[]),"../../assets/images/icons/pdf.svg":()=>s(()=>import("./pdf-Cl5NwO0Y.js"),[]),"../../assets/images/icons/pptx.svg":()=>s(()=>import("./pptx-BXalMJSa.js"),[]),"../../assets/images/icons/video.svg":()=>s(()=>import("./video-kaPZXCcl.js"),[]),"../../assets/images/icons/xlsx.svg":()=>s(()=>import("./xlsx-DkLPkXK6.js"),[])}),`../../assets/images/icons/${e}.svg`,6);r.value[e]=t.default}},I=e=>{const t=L(e);return r.value[t]||r.value.file},L=e=>{if(e.type==="FOLDER")return"folder";const t=V(e.name);return{pdf:"pdf",doc:"docx",docx:"docx",xls:"xlsx",xlsx:"xlsx",ppt:"pptx",pptx:"pptx",jpg:"image",jpeg:"image",png:"image",svg:"image",md:"md",mp3:"audio",mp4:"video",webm:"video",mov:"video",ogv:"video"}[t.toLowerCase()]||"file"},V=e=>{const t=e.split(".");return t.length>1?t.pop():""},g=v([]),c=async()=>{try{const e=await F();g.value=e.data.data}catch(e){console.log(e)}};A(()=>{T(),c()});const h=async e=>{try{await N(e.id),c()}catch(t){console.log(t)}},R=async e=>{B.confirm(`确认彻底删除 ${e.name} 吗？`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await S(e.id),c(),E({type:"success",message:"删除成功"})}).catch(()=>{E({type:"info",message:"未删除"})})};return(e,t)=>{const a=d("el-table-column"),u=d("el-button"),w=d("el-table");return x(),f(w,{data:g.value,style:{width:"100%"}},{default:i(()=>[n(a,{prop:"name",label:"文件名","show-overflow-tooltip":""},{default:i(o=>[l("div",$,[l("img",{src:I(o.row),alt:"icon",style:{width:"18px",height:"18px"}},null,8,z),l("span",null,M(o.row.name),1)])]),_:1}),n(a,{prop:"fileSize",label:"大小",align:"center",formatter:(o,_,m)=>p(Y)(m)},null,8,["formatter"]),p(b).isMobile?C("",!0):(x(),f(a,{key:0,prop:"createTime",label:"上传时间",align:"center",formatter:(o,_,m)=>p(k)(m).format("YYYY-MM-DD HH:mm:ss")},null,8,["formatter"])),n(a,{label:"操作",align:"center",width:"188"},{default:i(({row:o})=>[l("div",H,[n(u,{size:"small",onClick:_=>h(o)},{default:i(()=>[...t[0]||(t[0]=[y("恢复",-1)])]),_:1},8,["onClick"]),n(u,{size:"small",type:"danger",onClick:_=>R(o)},{default:i(()=>[...t[1]||(t[1]=[y("彻底删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])}}});export{J as default};
